!function(e,t){var i={opened:!1,chatbotOrigin:"https://buyee.aiagentbot.com",name:"buyee_en",notification:!1,hidden:!1,inquiries:"/help/yahoo/guide/inquiries",pauseTime:2e3,message:{liveAgentOnLineMessage:"Connecting now. Agent will be visible in new tab (please allow pop-ups).",liveAgentOffLineMessage:'Our agents are currently offline. <br> <br> Please send us an inquiry from the link below and we will get back to you in 1~2 business days. <br> <br> <a href="'+location.origin+String("/help/yahoo/guide/inquiries")+'" target="_blank">Inquire</a>'}};function n(){return screen.width<668?"mobile":"desktop"}function a(e){var t=n();i.opened?"mobile"===t?(e.style.height="100%",e.style.width="100%"):"desktop"===t&&(e.style.height="83%",e.style.width="440px"):(e.style.height="100px",e.style.width="100px")}function o(e){var i;return t.cookie.split(";").forEach(function(t){var n=t.split("=");n[0]&&n[0].trim()===e&&(i=n[1]&&n[1].trim())}),i}function l(e){t.cookie=e+";path=/"}function s(e){t.getElementById("chatbotframe").contentWindow.postMessage({name:e.subject,value:e.value,botMessage:e.botMessage},"*")}t.title=t.title+" bot-online",e.jivo_onLoadCallback=function(){"offline"===jivo_api.chatMode()&&(l("live-agent=false"),console.log("INSIDE OFFLINE"))},e.jivo_onAccept=function(){var e=o("convoId");jivo_api.setUserToken(e),l("live-agent=true")},e.jivo_onChangeState=function(e){"chat"===e&&l("live-agent=true")},"true"==o("live-agent")&&(t.title&&-1!==t.title.indexOf("bot-online")&&(t.title=t.title.replace("bot-online","agent-online")),i.hidden=!0),e.addEventListener("message",function(n){if(""===n.data||n.origin!==i.chatbotOrigin)return;if(n.data)if("setVisiblity"===n.data.name)if(n.data.value){i.opened=!0;var o=t.getElementById("chatbotframe");a(o)}else{i.opened=!1,i.notification=!1;var o=t.getElementById("chatbotframe");a(o)}else if("setNotification"===n.data.name){i.notification=!0;var o=t.getElementById("chatbotframe");!function(e){i.notification?(e.style.height="170px",e.style.width="350px"):(e.style.height="100px",e.style.width="100px")}(o)}else if("setCookie"===n.data.name)n.data.value&&l(n.data.value);else if("openNewTab"===n.data.name){var r=e.open(location.pathname,"_blank");null==r&&alert("Please allow the pop-up on your browser and click the customer service associate icon/button again")}else"goToliveAgent"===n.data.name&&("offline"===jivo_api.chatMode()?s({subject:"liveAgentCurrentState",value:"offline",botMessage:i.message.liveAgentOffLineMessage}):(s({subject:"liveAgentCurrentState",value:"online",botMessage:i.message.liveAgentOnLineMessage}),l("live-agent=true"),p=location.pathname,d="_blank",setTimeout(function(){var t=e.open(p,d);null==t&&alert("Please allow the pop-up on your browser and click the customer service associate icon/button again")},i.pauseTime)));var p,d},!1),function(){var e=t.createElement("div");e.setAttribute("id","chatbotwrapper"),e.setAttribute("style","position: absolute; z-index: 2147483700;"),t.body.appendChild(e);var a,o,l,s=t.createElement("iframe");s.setAttribute("id","chatbotframe"),s.setAttribute("src",i.chatbotOrigin+"/widget?name="+i.name),a=s,"mobile"===(l=n())?o="border: none; display: block; height: 100px !important; width: 100px !important; position: fixed; top: auto; left: auto; bottom: 0 !important; right: 0 !important; width: 100px !important; height: 100px !important; visibility: visible; z-index: 2147483700; max-height: 100vh; max-width: 100vw; transition: none 0s ease 0s; background: none transparent !important; opacity: 1; ":"desktop"===l&&(o="border: none; display: block; height: 100px !important; width: 100px !important; position: fixed; top: auto; left: auto; bottom: 10px !important; right: 20px !important; width: 100px !important; height: 100px !important; visibility: visible; z-index: 2147483700; transition: none 0s ease 0s; background: none transparent !important; opacity: 1; "),i.hidden&&(o="display: none !important;"),a.setAttribute("style",o),e.appendChild(s)}()}(window,document);
